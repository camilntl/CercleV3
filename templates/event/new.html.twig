{% extends 'base.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            tinymce.init({
                selector: '#article_content',
                // ... autres options de TinyMCE ...
            });
        });
    </script>
{% endblock %}

{% block body %}
    <div class="px-10 py-4 mt-8 h-3/4 flex flex-col justify-center max-w-lg mx-auto bg-white dark:bg-black shadow-lg rounded-lg">
        <h2 class="text-2xl text-center text-purple-600 font-bold mb-6">Créer un nouvel évènement</h2>

        {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
            <div class="space-y-6">
                {{ form_errors(form) }}

                <div class="mb-4">
                    {{ form_label(form.name, 'Titre de l\'évènement', {'label_attr': {'class': 'block text-purple-700 dark:text-purple-300 mb-2 text-xs font-medium'}}) }}
                    {{ form_widget(form.name, {'attr': {'class': 'border-none rounded-full w-full p-3 text-sm text-lavande-500 bg-purple-200 focus:outline-none focus:shadow-outline placeholder-lavande-500 dark:bg-lavande-900 dark:border-lavande-900'}}) }}
                </div>

                <div>
                    {{ form_label(form.description, 'Description de l\'évènement', {'label_attr': {'class': 'block text-purple-700 dark:text-purple-300 mb-2 text-xs font-medium'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'border-none rounded-full w-full p-3 text-sm text-lavande-500 bg-purple-200 focus:outline-none focus:shadow-outline placeholder-lavande-500 dark:bg-lavande-900 dark:border-lavande-900'}}) }}
                </div>

                <div>
                    {{ form_label(form.startDate, 'Date de début', {'label_attr': {'class': 'block text-purple-700 dark:text-purple-300 mb-2 text-xs font-medium'}}) }}
                    {{ form_widget(form.startDate, {'attr': {'class': 'border-none rounded-full w-full p-3 text-sm text-lavande-500 bg-purple-200 focus:outline-none focus:shadow-outline placeholder-lavande-500 dark:bg-lavande-900 dark:border-lavande-900'}}) }}
                </div>

                <div class="mb-4">
                    {{ form_label(form.endDate, 'Date de fin', {'label_attr': {'class': 'block text-purple-700 dark:text-purple-300 mb-2 text-xs font-medium'}}) }}
                    {{ form_widget(form.endDate, {'attr': {'class': 'border-none rounded-full w-full p-3 text-sm text-lavande-500 bg-purple-200 focus:outline-none focus:shadow-outline placeholder-lavande-500 dark:bg-lavande-900 dark:border-lavande-900'}}) }}
                </div>

                <div class="mb-4">
                    {{ form_label(form.location, 'Lieu de l\'évènement', {'label_attr': {'class': 'block text-purple-700 dark:text-purple-300 mb-2 text-xs font-medium'}}) }}
                    {{ form_widget(form.location, {'attr': {'class': 'border-none rounded-full w-full p-3 text-sm text-lavande-500 bg-purple-200 focus:outline-none focus:shadow-outline placeholder-lavande-500 dark:bg-lavande-900 dark:border-lavande-900'}}) }}
                </div>

                <div class="mb-4">
                    {{ form_label(form.image, 'Image d\'illustration', {'label_attr': {'class': 'block text-purple-700 dark:text-purple-300 mb-2 text-xs font-medium'}}) }}
                    {{ form_widget(form.image, {'attr': {'class': 'border-none rounded-full w-full p-3 text-sm text-lavande-500 bg-purple-200 focus:outline-none focus:shadow-outline placeholder-lavande-500 dark:bg-lavande-900 dark:border-lavande-900'}}) }}
                </div>

                <div class="flex justify-center mt-6">
                    <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-full transition duration-300">Enregistrer l'évènement</button>
                </div>
                <div class="text-center mt-4">
                    <a href="{{ path('app_events') }}" class="text-purple-600 hover:text-purple-700 transition duration-300">Retour à la liste des évènements</a>
                </div>
            </div>
        {{ form_end(form) }}
    </div>

    <script>
        var titleElement = document.getElementById("article_title");
        var slugElement = document.getElementById("article_slug");

        titleElement.addEventListener('change', function (event) {
            slugElement.value = titleElement.value;
        });
    </script>
{% endblock %}
